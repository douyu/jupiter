(window.webpackJsonp=window.webpackJsonp||[]).push([[70],{414:function(_,v,t){"use strict";t.r(v);var e=t(10),a=Object(e.a)({},(function(){var _=this,v=_._self._c;return v("ContentSlotsDistributor",{attrs:{"slot-key":_.$parent.slotKey}},[v("h1",{attrs:{id:"_9-3-服务代理"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#_9-3-服务代理"}},[_._v("#")]),_._v(" 9.3 服务代理")]),_._v(" "),v("p",[v("code",[_._v("Juno-agent")]),_._v("可以做"),v("code",[_._v("gRPC")]),_._v("到"),v("code",[_._v("ETCD")]),_._v("的代理，用于减少"),v("code",[_._v("ETCD")]),_._v("，提升"),v("code",[_._v("ETCD")]),_._v("性能和服务可靠性。")]),_._v(" "),v("blockquote",[v("p",[_._v("todo: 为了让大家更好的理解服务代理的必要性，请大家先阅读"),v("RouterLink",{attrs:{to:"/awesome/register.html"}},[_._v("服务注册痛点")]),_._v("。")],1)]),_._v(" "),v("h2",{attrs:{id:"_9-3-1-功能描述"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#_9-3-1-功能描述"}},[_._v("#")]),_._v(" 9.3.1 功能描述")]),_._v(" "),v("ul",[v("li",[_._v("Register")]),_._v(" "),v("li",[_._v("Lease")]),_._v(" "),v("li",[_._v("Watch")]),_._v(" "),v("li",[_._v("Discovery（todo）")])]),_._v(" "),v("h2",{attrs:{id:"_9-3-2-数据拦截"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#_9-3-2-数据拦截"}},[_._v("#")]),_._v(" 9.3.2 数据拦截")]),_._v(" "),v("p",[_._v("会将Register，Lease，Watch，Discovery里的方法设置拦截器，将数据放入到消息总线，方便数据分析。")]),_._v(" "),v("h2",{attrs:{id:"_9-3-3-开启服务代理"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#_9-3-3-开启服务代理"}},[_._v("#")]),_._v(" 9.3.3 开启服务代理")]),_._v(" "),v("p",[_._v("我们可以使用"),v("code",[_._v("Juno-agent")]),_._v("接管应用的注册、注销、租期、发现等功能。")]),_._v(" "),v("p",[_._v("我们需要在管理后台，需要设置五个信息")]),_._v(" "),v("ul",[v("li",[_._v("注册key的前缀")]),_._v(" "),v("li",[_._v("如何解析注册里的ip，port信息")]),_._v(" "),v("li",[_._v("探活的路径")]),_._v(" "),v("li",[_._v("流控数据")]),_._v(" "),v("li",[_._v("lease周期")])]),_._v(" "),v("p",[_._v("设置完拦截的代理信息后，我们就可以开启此功能。")]),_._v(" "),v("p",[_._v("这个时候"),v("code",[_._v("Juno-agent")]),_._v("将会拦截该应用的注册key，解析出该应用需要注册的ip port，根据探活路径进行探活。探活成功后，才会将该应用的服务注册到"),v("code",[_._v("ETCD")]),_._v("里。这个时候还可以根据"),v("code",[_._v("ETCD")]),_._v("里的配置，对服务按权重进行逐步导流。")]),_._v(" "),v("p",[_._v("同时根据配置的周期探活，对服务注册进行lease操作。")]),_._v(" "),v("p",[_._v("同理注销操作。")])])}),[],!1,null,null,null);v.default=a.exports}}]);